<div class="container my-4">
  <h2 class="mb-3">Lista de Productos</h2>

  <ul class="list-group mb-4">
    <li *ngFor="let producto of productos" class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        <strong>{{ producto.nombre }}</strong> - ${{ producto.precio }} â€” Cantidad: {{ producto.cantidad }}
      </div>
      <div>
        <button class="btn btn-sm btn-primary me-2" (click)="seleccionarProducto(producto)">Editar</button>
        <button class="btn btn-sm btn-danger" (click)="eliminarProducto(producto.id!)">Eliminar</button>
      </div>
    </li>
  </ul>

  <hr />

  <h2 class="mb-3">{{ editando ? 'Editar Producto' : 'Crear Nuevo Producto' }}</h2>

  <form [formGroup]="productoForm" (ngSubmit)="editando ? actualizarProducto() : crearProducto()" class="p-3">

    @if (productoForm.get('nombre')?.invalid && productoForm.get('nombre')?.touched) {
    <div class="alert alert-danger">
      @if (productoForm.get('nombre')?.errors?.['required']) {
      <div>El nombre es obligatorio.</div>
      }
      @if (productoForm.get('nombre')?.errors?.['minlength']) {
      <div>El nombre debe tener al menos 3 caracteres.</div>
      }
    </div>
    }

    <div class="mb-3">
      <label for="nombre" class="form-label">Nombre</label>
      <input id="nombre" type="text" class="form-control" formControlName="nombre" />
    </div>

    <div class="mb-3">
      <label for="precio" class="form-label">Precio</label>
      <input id="precio" type="number" class="form-control" formControlName="precio" />
    </div>

    <div class="mb-3">
      <label for="cantidad" class="form-label">Cantidad</label>
      <input id="cantidad" type="number" class="form-control" formControlName="cantidad" />
    </div>

    <button type="submit" class="btn btn-primary">{{ editando ? 'Actualizar' : 'Crear' }}</button>
    @if (editando) {
    <button type="button" class="btn btn-secondary ms-2" (click)="cancelarEdicion()">Cancelar</button>
    }
  </form>
  
</div>